import{a as W}from"./chunk-MWZ7G5A7.js";import{$ as d,A as B,Aa as E,B as n,C as c,D as U,F as j,H as k,J as h,K as M,M as s,P as a,R as r,S as o,T as _,U as V,V as H,W as z,X as y,Y as p,_ as m,aa as u,c as R,da as K,ea as f,fa as b,ga as q,ka as g,l as N,la as x,ma as S,na as G,ua as J,v as $,w as P,wa as Q,xa as D,y as A}from"./chunk-ITMP6JCP.js";var C=class t{transform(i){return i?`${i.substring(0,3)}-${i.substring(3)}`:""}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=M({name:"isbn",type:t,pure:!0})};var L=class t{constructor(i,e,l){this.template=i;this.viewContainer=e;this.authService=l;this.authService.isAuthenticated$.pipe(N(this.destroy$)).subscribe(v=>{v?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}destroy$=new R;ngOnDestroy(){this.destroy$.next()}static \u0275fac=function(e){return new(e||t)(c(U),c(j),c(W))};static \u0275dir=h({type:t,selectors:[["","bmLoggedinOnly",""]]})};var T=class t{confirmText;confirm=new A;onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275dir=h({type:t,selectors:[["","bmConfirm",""]],hostBindings:function(e,l){e&1&&y("click",function(){return l.onClick()})},inputs:{confirmText:[0,"bmConfirm","confirmText"]},outputs:{confirm:"confirm"}})};var ee=t=>["/admin/edit",t];function te(t,i){if(t&1&&(r(0,"p",9),m(1),o()),t&2){let e=p().ngIf;n(),d(e.subtitle)}}function ie(t,i){if(t&1&&(r(0,"li"),m(1),o()),t&2){let e=i.$implicit;n(),d(e)}}function oe(t,i){if(t&1&&(r(0,"div")(1,"h2"),m(2,"Published"),o(),m(3),f(4,"date"),o()),t&2){let e=p().ngIf;n(3),u(" ",q(4,1,e.published,"longDate")," ")}}function ne(t,i){if(t&1&&_(0,"img",10),t&2){let e=p().ngIf;a("src",e.thumbnailUrl,B)}}function re(t,i){if(t&1){let e=z();V(0),r(1,"button",11),y("confirm",function(){$(e);let v=p().ngIf,Y=p();return P(Y.removeBook(v.isbn))}),m(2," Remove book "),o(),r(3,"a",12),m(4," Edit book "),o(),H()}if(t&2){let e=p().ngIf;n(3),a("routerLink",K(1,ee,e.isbn))}}function me(t,i){if(t&1&&(r(0,"div",1)(1,"h1"),m(2),o(),s(3,te,2,1,"p",2),r(4,"div",3)(5,"div")(6,"h2"),m(7,"Authors"),o(),r(8,"ul"),s(9,ie,2,1,"li",4),o()(),r(10,"div")(11,"h2"),m(12,"ISBN"),o(),m(13),f(14,"isbn"),o(),s(15,oe,5,4,"div",5),o(),r(16,"h2"),m(17,"Description"),o(),r(18,"p"),m(19),o(),s(20,ne,1,1,"img",6),r(21,"a",7),m(22,"Back to list"),o(),s(23,re,5,3,"ng-container",8),o()),t&2){let e=i.ngIf;n(2),d(e.title),n(),a("ngIf",e.subtitle),n(6),a("ngForOf",e.authors),n(4),u(" ",b(14,7,e.isbn)," "),n(2),a("ngIf",e.published),n(4),d(e.description),n(),a("ngIf",e.thumbnailUrl)}}var w=class t{constructor(i,e,l){this.service=i;this.route=e;this.router=l;let v=this.route.snapshot.paramMap.get("isbn");this.book$=this.service.getSingle(v)}book$;removeBook(i){this.service.remove(i).subscribe(()=>{this.router.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)(c(E),c(J),c(Q))};static \u0275cmp=k({type:t,selectors:[["bm-book-details"]],decls:2,vars:3,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(e,l){e&1&&(s(0,me,24,9,"div",0),f(1,"async")),e&2&&a("ngIf",b(1,1,l.book$))},dependencies:[x,g,G,S,D,C,L,T],encapsulation:2})};function ae(t,i){if(t&1&&_(0,"img",6),t&2){let e=p(2);a("src",e.book.thumbnailUrl,B)}}function se(t,i){if(t&1&&(r(0,"p",7),m(1),o()),t&2){let e=p(2);n(),u(" ",e.book.subtitle," ")}}function pe(t,i){if(t&1&&(r(0,"li"),m(1),o()),t&2){let e=i.$implicit;n(),u(" ",e," ")}}function le(t,i){if(t&1&&(r(0,"a",1),s(1,ae,1,1,"img",2),r(2,"h2"),m(3),o(),s(4,se,2,1,"p",3),r(5,"ul",4),s(6,pe,2,1,"li",5),o(),r(7,"div"),m(8),f(9,"isbn"),o()()),t&2){let e=p();a("routerLink",e.book.isbn),n(),a("ngIf",e.book.thumbnailUrl),n(2),d(e.book.title),n(),a("ngIf",e.book.subtitle),n(2),a("ngForOf",e.book.authors),n(2),u("ISBN ",b(9,6,e.book.isbn),"")}}var O=class t{book;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[["class","list-item",3,"routerLink",4,"ngIf"],[1,"list-item",3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(e,l){e&1&&s(0,le,10,8,"a",0),e&2&&a("ngIf",l.book)},dependencies:[x,g,D,C],encapsulation:2})};function ce(t,i){if(t&1&&(r(0,"li"),_(1,"bm-book-list-item",4),o()),t&2){let e=i.$implicit;n(),a("book",e)}}function fe(t,i){t&1&&(r(0,"li"),m(1," No books available. "),o())}function de(t,i){if(t&1&&(r(0,"ul",1),s(1,ce,2,1,"li",2)(2,fe,2,0,"li",3),o()),t&2){let e=i.ngIf;n(),a("ngForOf",e),n(),a("ngIf",!e.length)}}var F=class t{constructor(i){this.service=i;this.books$=this.service.getAll()}books$;static \u0275fac=function(e){return new(e||t)(c(E))};static \u0275cmp=k({type:t,selectors:[["bm-book-list"]],decls:4,vars:3,consts:[["class","book-list",4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"book"]],template:function(e,l){e&1&&(r(0,"h1"),m(1,"Books"),o(),s(2,de,3,2,"ul",0),f(3,"async")),e&2&&(n(2),a("ngIf",b(3,1,l.books$)))},dependencies:[x,g,S,O],encapsulation:2})};var Ve=[{path:"",component:F},{path:":isbn",component:w}];export{Ve as BOOKS_ROUTES};
